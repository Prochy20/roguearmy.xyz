# Routing

## Route Groups

Next.js route groups organize routes without affecting URLs:

```
src/app/
├── (frontend)/     # Public-facing routes
│   ├── layout.tsx  # Shared layout for all frontend pages
│   └── page.tsx    # Homepage (/)
│
└── (payload)/      # Payload CMS routes
    ├── admin/      # Admin panel (/admin)
    └── api/        # API endpoints (/api/...)
```

The parentheses `()` create logical groupings without adding URL segments.

## Frontend Routes

### Homepage
**Path**: `/`
**File**: `src/app/(frontend)/page.tsx`

Server component that composes all homepage sections:
```tsx
import {
  Hero,
  GamesShowcase,
  StatsTicker,
  CommunityValues,
  AshleyTerminal,
  FinalCTA,
} from "@/components/home"

export default function HomePage() {
  return (
    <main>
      <Hero />
      <GamesShowcase />
      <StatsTicker />
      <CommunityValues />
      <AshleyTerminal />
      <FinalCTA />
    </main>
  )
}
```

### Frontend Layout
**File**: `src/app/(frontend)/layout.tsx`

Provides:
- Global metadata (title, description, OG tags)
- Structured data (JSON-LD for Organization)
- Vercel Analytics
- ScanlineOverlay effect
- Dark mode class on `<html>`

## Payload Routes

### Admin Panel
**Path**: `/admin/*`
**File**: `src/app/(payload)/admin/[[...segments]]/page.tsx`

Catch-all route for Payload admin UI. Handles:
- Dashboard
- Collection views
- Document editing
- User management

### REST API
**Path**: `/api/*`
**File**: `src/app/(payload)/api/[...slug]/route.ts`

Payload auto-generates REST endpoints:
```
GET    /api/users          # List users
POST   /api/users          # Create user
GET    /api/users/:id      # Get user by ID
PATCH  /api/users/:id      # Update user
DELETE /api/users/:id      # Delete user

GET    /api/media          # List media
POST   /api/media          # Upload file
GET    /api/media/:id      # Get media by ID
```

### GraphQL
**Path**: `/api/graphql`
**File**: `src/app/(payload)/api/graphql/route.ts`

GraphQL endpoint for complex queries.

**Path**: `/api/graphql-playground`
**File**: `src/app/(payload)/api/graphql-playground/route.ts`

Interactive GraphQL explorer (dev only).

## SEO Routes

### robots.txt
**File**: `src/app/robots.ts`

```typescript
import { MetadataRoute } from 'next'

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: '*',
      allow: '/',
      disallow: ['/admin', '/api'],
    },
    sitemap: 'https://roguearmyga.com/sitemap.xml',
  }
}
```

Blocks admin and API routes from search engines.

### sitemap.xml
**File**: `src/app/sitemap.ts`

```typescript
import { MetadataRoute } from 'next'

export default function sitemap(): MetadataRoute.Sitemap {
  return [
    {
      url: 'https://roguearmyga.com',
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 1,
    },
  ]
}
```

Currently only homepage. Extend when adding more pages.

## Adding New Routes

### New Frontend Page
```
src/app/(frontend)/about/page.tsx    → /about
src/app/(frontend)/games/page.tsx    → /games
src/app/(frontend)/join/page.tsx     → /join
```

### Dynamic Routes
```
src/app/(frontend)/games/[slug]/page.tsx → /games/division-2
```

### API Routes (Custom)
```
src/app/api/discord/route.ts         → /api/discord
```

## Route Metadata

Each page can export metadata:

```typescript
// src/app/(frontend)/about/page.tsx
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'About | Rogue Army',
  description: 'Learn about our gaming community',
}

export default function AboutPage() {
  return <main>...</main>
}
```

## Layout Hierarchy

```
RootLayout (no file - inferred)
└── (frontend)/layout.tsx
    ├── page.tsx (/)
    └── future pages...

└── (payload)/layout.tsx (auto-generated by Payload)
    └── admin/[[...segments]]/page.tsx
```

Each route group has its own layout, allowing different styling for frontend vs admin.
